<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>tsproc - tsproc</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.8.0pr2/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <script src="http://yui.yahooapis.com/combo?3.8.0pr2/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            <h1><a href="../index.html"><img src="../assets/css/logo.png" width="117" height="52">tsproc: tsproc</a></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div class="yui3-g">

        <div id="sidebar" class="yui3-u">
            <div id="modules" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Modules</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../modules/tsproc.html">tsproc</a>
                            </li>
                    </ul>
                </div>
            </div>
            
            <div id="classes" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Classes</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="../classes/tsinterp.html">tsinterp</a></li>
                            <li><a href="../classes/tsproc.html">tsproc</a></li>
                            <li><a href="../classes/tsreductions.html">tsreductions</a></li>
                    </ul>
                </div>
            </div>
            
            <div id="methods-on-page" class="sidebox on-page">
                <div class="hd">
                    <h2 class="no-toc">Methods On Page</h2>
                </div>
                <div class="bd">
                    <ul>
                            <li><a href="#methods_checkSimilarity">checkSimilarity</a></li>
                            <li><a href="#methods_cut">cut</a></li>
                            <li><a href="#methods_cutAbove">cutAbove</a></li>
                            <li><a href="#methods_cutAboveMax">cutAboveMax</a></li>
                            <li><a href="#methods_cutBellow">cutBellow</a></li>
                            <li><a href="#methods_cutBellowMin">cutBellowMin</a></li>
                            <li><a href="#methods_extractValues">extractValues</a></li>
                            <li><a href="#methods_getAllDates">getAllDates</a></li>
                            <li><a href="#methods_getAvgPerDay">getAvgPerDay</a></li>
                            <li><a href="#methods_getBorders">getBorders</a></li>
                            <li><a href="#methods_getConfig">getConfig</a></li>
                            <li><a href="#methods_getCorrelationCoef">getCorrelationCoef</a></li>
                            <li><a href="#methods_getDoc">getDoc</a></li>
                            <li><a href="#methods_getDocByTimestamp">getDocByTimestamp</a></li>
                            <li><a href="#methods_getEmptyDoc">getEmptyDoc</a></li>
                            <li><a href="#methods_getFields">getFields</a></li>
                            <li><a href="#methods_getMaxDate">getMaxDate</a></li>
                            <li><a href="#methods_getMinDate">getMinDate</a></li>
                            <li><a href="#methods_getNbTS">getNbTS</a></li>
                            <li><a href="#methods_getSameDates">getSameDates</a></li>
                            <li><a href="#methods_getTimestamp">getTimestamp</a></li>
                            <li><a href="#methods_getTimestampField">getTimestampField</a></li>
                            <li><a href="#methods_getTimestampFormat">getTimestampFormat</a></li>
                            <li><a href="#methods_getTS">getTS</a></li>
                            <li><a href="#methods_getTSDates">getTSDates</a></li>
                            <li><a href="#methods_getTSSize">getTSSize</a></li>
                            <li><a href="#methods_interpolate">interpolate</a></li>
                            <li><a href="#methods_intersect">intersect</a></li>
                            <li><a href="#methods_isHomogeneous">isHomogeneous</a></li>
                            <li><a href="#methods_isISO">isISO</a></li>
                            <li><a href="#methods_isNominal">isNominal</a></li>
                            <li><a href="#methods_isUNIX">isUNIX</a></li>
                            <li><a href="#methods_isValid">isValid</a></li>
                            <li><a href="#methods_markCorrelation">markCorrelation</a></li>
                            <li><a href="#methods_merge">merge</a></li>
                            <li><a href="#methods_mergeConfigs">mergeConfigs</a></li>
                            <li><a href="#methods_process">process</a></li>
                            <li><a href="#methods_quantize">quantize</a></li>
                            <li><a href="#methods_renameField">renameField</a></li>
                            <li><a href="#methods_toISO">toISO</a></li>
                            <li><a href="#methods_undersample">undersample</a></li>
                    </ul>
                </div>
            </div>
            
            
            
            
            <div id="fileTree" class="sidebox">
                <div class="hd">
                    <h2 class="no-toc">Files</h2>
                </div>
                <div class="bd">
                    <ul><li>lib/<ul><li><a href="../files/lib_tsinterp.js.html">tsinterp.js</a></li><li><a href="../files/lib_tsproc.js.html">tsproc.js</a></li><li><a href="../files/lib_tsreductions.js.html">tsreductions.js</a></li></ul></li></ul>
                </div>
            </div>
            
        </div>

        <div id="main" class="yui3-u">
            <div class="content"><h4>Class tsproc</h4>
<span class="foundat">Class defined in: <a href="../files/lib_tsproc.js.html#l62"><code>lib&#x2F;tsproc.js:62</code></a></span>
<div class="intro"><p>TimeSeries Processor (tsproc) is a module that
takes in one or multiple timeseries whis
their configuration (cf <a href="#methods_tsproc">constructor</a>) and offers
different public methods to process and explore
the timeseries.<br/>
The main public methods are:</p>
<ul>
<li><a href="#methods_cut">cut()</a>: cutting the range of documents</li>
<li><a href="#methods_interpolate">interpolate()</a>: interpolation of missing documents</li>
<li><a href="#methods_intersect">intersect()</a>: leaving the intersected documents between the timeseries</li>
<li><a href="#methods_merge">merge()</a>: merging multiple timeseries into one</li>
<li><a href="#methods_renameField">renameField()</a>: renaming a field in all documents</li>
<li><a href="#methods_checkSimilarity">checkSimilarity()</a>: similarity check between timeseries</li>
<li><a href="#methods_toISO">toISO()</a>: passing the timestamp to the ISO format</li>
<li><a href="#methods_undersample">undersample()</a>: timeseries size reduction</li>
<li><a href="#methods_quantize">quantize()</a>: values and timestamps quantification</li>
<li><a href="#methods_process">process()</a>: a combination of all the previous methods</li>
</ul>
<p>All of the sited methods are changing the state of the timeseries
(which is irreversible) and all of them are using a callback function
in order to pass erros and return modified timeseries.</p>
</div>

<a name="methods_tsproc"></a>
<div class="method item">
     <strong class="name"><code>tsproc</code></strong>( <code>timeseries, config, err_callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l62"><code>lib&#x2F;tsproc.js:62</code></a>
    </span><br>
    
    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>timeseries</code> <strong>&lt;Array&gt;</strong>
        <p>An array of timeseries. Each one should be sorted</p>

        </li>
        <li>
            <code>config</code> <strong>&lt;Json&gt;</strong>
        <p>A description of each timeseries (cf example)</p>

        </li>
        <li>
            <code>err_callback</code> <strong>&lt;Function&gt;</strong>
        <p>Error callback</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {
        &quot;transform&quot;:{&quot;type&quot;:&quot;interp&quot;,&quot;interp_type&quot;:&quot;linear&quot;},

        &quot;reduction&quot;:{&quot;type&quot;:&quot;skip&quot;,&quot;size&quot;:1,&quot;target_field&quot;:&quot;&quot;},

        &quot;date_borders&quot;:{&quot;from&quot;:{&quot;date&quot;:&quot;&quot;},&quot;to&quot;:{&quot;date&quot;:&quot;&quot;}},

        &quot;correlation&quot;:{&quot;count_negative&quot;:false,&quot;max_coef&quot;:true},

        &quot;timeseries&quot;:
            [
                {
                &quot;fields&quot;:
                    [
                        {&quot;name&quot;:&quot;a&quot;}
                    ],

                &quot;timestamp&quot;:{&quot;name&quot;:&quot;year&quot;,&quot;format&quot;:&quot;YYYY&quot;}
                },

                {
                &quot;fields&quot;:
                    [
                        {&quot;name&quot;:&quot;b&quot;}
                    ],  

                &quot;timestamp&quot;:{&quot;name&quot;:&quot;year&quot;,&quot;format&quot;:&quot;YYYY&quot;}
                }
            ]
    };

var ts = [
        [{a: 18.11, year:'2011'}, {a: 21.07, year:'2012'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}]
     ]

var tsp = new tsproc(ts, config, null);</code></pre>

</div>

<div id="classdocs">
    <ul>
        <li><a href="#methods">Methods</a></li>
        <li><a href="#props">Properties</a></li>
    </ul>
    <div>
            <div id="methods">
<a name="methods_checkSimilarity"></a>
<div class="method item">
     <strong class="name"><code>checkSimilarity</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1387"><code>lib&#x2F;tsproc.js:1387</code></a>
    </span><br>
    <p>Public method that checks the local similarity
between the fields of a timeseries. Does this by caclulating
the local correlation.</p>
<p>Timeseries should be merged (ie the function works only with
a single timeseries) and have at least two non-timestamp fields.
The timeseries values should be non-nominal.</p>
<p>The similarity is indicated by adding a new field 'correlation' to each document.
If value of this field is not 'false', it means that a document is a part
of a set of documents that are strongly correlated.
The correlation is considered strong if correalation coef is &gt; 0.6.</p>
<p>More info about correlation can be found <a href="http://www.statisticshowto.com/what-is-the-correlation-coefficient-formula/">here</a>.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}, {a: 0.24, year:'2014'}, {a: 25.25, year:'2015'}, {a: 25.25, year:'2016'}, {a: 25.25, year:'2017'}],
        [{b: 21.42, year:'2012'}, {b: 23.11, year:'2013'}, {b: 0.11, year:'2014'}, {b: 21.01, year:'2015'}, {b: 4.5, year:'2016'}, {b: 35.2, year:'2017'}]
     ];

var tsp = new tsproc(ts, config, null);

//we can just merge (without interpolation) the timeseries
//because they are homogeneous
tsp.merge(null);

tsp.checkSimilarity(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  {a: 21.07, b: 21.42, time: '2012', correlation: 0.9998},
        //  {a: 23.23, b: 23.11, time: '2013', correlation: 0.9998},
        //  {a: 0.24, b: 0.11, time: '2014', correlation: 0.9998},
        //  {a: 25.25, b: 21.01, time: '2015', correlation: false},
        //  {a: 25.25, b: 4.5, time: '2016', correlation: false},
        //  {a: 25.25, b: 35.2, time: '2017', correlation: false} 
        //]
        //
        // we can conclude that the first three document are strongly correlated
});
</code></pre>

</div>
<a name="methods_cut"></a>
<div class="method item">
     <strong class="name"><code>cut</code></strong>( <code>date_borders, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l885"><code>lib&#x2F;tsproc.js:885</code></a>
    </span><br>
    <p>Public method that leaves in the
timeseries only the documents between
two dates specified in the <code>date_borders</code> array</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>date_borders</code> <strong>&lt;Array&gt;</strong>
        <p>An array of two dates
(ISO strings)</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 18.11, year:'2011'}, {a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}, {b: 22.11, year:'2014'}]
     ];

var tsp = new tsproc(ts, config, null);

tsp.cut(['2012-01-01T00:00:00.000Z', '2013-01-01T00:00:00.000Z'], function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {a: 21.07, year: '2012-01-01T00:00:00.000Z'},
        //      {a: 23.23, year: '2013-01-01T00:00:00.000Z'}
        //  ],
        //  [
        //      {b: 26.42, year: '2012-01-01T00:00:00.000Z'},
        //      {b: 24.11, year: '2013-01-01T00:00:00.000Z'}
        //  ]
        //]
});</code></pre>

</div>
<a name="methods_cutAbove"></a>
<div class="method item private">
     <strong class="name"><code>cutAbove</code></strong>( <code>ts_index, index </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1781"><code>lib&#x2F;tsproc.js:1781</code></a>
    </span><br>
    <p>Private method that cuts in a specified timeseries all the documents
that are above the specified index.
Index is included in a cut.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>An index of a timeseries to cut</p>

        </li>
        <li>
            <code>index</code> <strong>&lt;Int&gt;</strong>
        <p>An index above which to cut</p>

        </li>
    </ul>
</div>
<a name="methods_cutAboveMax"></a>
<div class="method item private">
     <strong class="name"><code>cutAboveMax</code></strong>( <code>max_date </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1796"><code>lib&#x2F;tsproc.js:1796</code></a>
    </span><br>
    <p>Private method that cuts in all the
timeseries the documents that are earlier
than <code>max_date</code>.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>max_date</code> <strong>&lt;Moment&gt;</strong>
        <p>A moment.js date</p>

        </li>
    </ul>
</div>
<a name="methods_cutBellow"></a>
<div class="method item private">
     <strong class="name"><code>cutBellow</code></strong>( <code>ts_index, index </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1766"><code>lib&#x2F;tsproc.js:1766</code></a>
    </span><br>
    <p>Private method that cuts in a specified timeseries all the documents
that are bellow the specified index.
Index is included in a cut.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>An index of a timeseries to cut</p>

        </li>
        <li>
            <code>index</code> <strong>&lt;Int&gt;</strong>
        <p>An index bellow which to cut</p>

        </li>
    </ul>
</div>
<a name="methods_cutBellowMin"></a>
<div class="method item private">
     <strong class="name"><code>cutBellowMin</code></strong>( <code>min_date </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1851"><code>lib&#x2F;tsproc.js:1851</code></a>
    </span><br>
    <p>Private method that cuts in all the
timeseries the documents that are older
than <code>min_date</code>.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>min_date</code> <strong>&lt;Moment&gt;</strong>
        <p>A moment.js date</p>

        </li>
    </ul>
</div>
<a name="methods_extractValues"></a>
<div class="method item private">
    Array <strong class="name"><code>extractValues</code></strong>( <code>borders </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l2012"><code>lib&#x2F;tsproc.js:2012</code></a>
    </span><br>
    <p>A private method that exracts an array of values of all
the documents in a timeseries.</p>
<p>The function works only with merged timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>borders</code> <strong>&lt;Array&gt;</strong>
        <p>An array of indexes between which the values should be extracted</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of values</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>//[{a: 18.01, year:'2011'}, {a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}]
console.log(extractValues.call(this)); //[[18.01], [21.07], [23.23]]
console.log(extractValues.call(this, [1,2])); //[[21.07], [23.23]]
</code></pre>

</div>
<a name="methods_getAllDates"></a>
<div class="method item private">
    Array <strong class="name"><code>getAllDates</code></strong>( <code>  </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1907"><code>lib&#x2F;tsproc.js:1907</code></a>
    </span><br>
    <p>Private method that returns an array
of all the possible dates of all the timeseries (without duplication).</p>
<p>The timestamps of all the timeseries shoud be the ISO strings.
Final array of dates is sorted chronologically.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of all possible dates (ISO strings) in all the timeseries</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>//[[{a: 18.01, year:'2011-01-01T00:00:00.000Z'}, {a: 21.07, year:'2012-01-01T00:00:00.000Z'}], [{b: 21.42, year:'2012-01-01T00:00:00.000Z'}, {b: 23.11, year:'2013-01-01T00:00:00.000Z'}]]
console.log(getAllDates.call(this)); //['2011-01-01T00:00:00.000Z', '2012-01-01T00:00:00.000Z', '2013-01-01T00:00:00.000Z']
</code></pre>

</div>
<a name="methods_getAvgPerDay"></a>
<div class="method item">
    Float <strong class="name"><code>getAvgPerDay</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l512"><code>lib&#x2F;tsproc.js:512</code></a>
    </span><br>
    <p>Public method that returns an average number of timestamps per day.
The timeseries should be merged.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Float&gt; <p>An average number of timestamps per day</p>
</div>
</div>
<a name="methods_getBorders"></a>
<div class="method item">
    Array <strong class="name"><code>getBorders</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l541"><code>lib&#x2F;tsproc.js:541</code></a>
    </span><br>
    <p>Public method that returns the date borders, which corresponds
to the earliest timestamp from all the timseries and the oldest timestamp
from all the timeseries.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array with date (string with ISO format) borders</p>
</div>
</div>
<a name="methods_getConfig"></a>
<div class="method item">
    Json <strong class="name"><code>getConfig</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l307"><code>lib&#x2F;tsproc.js:307</code></a>
    </span><br>
    <p>Public method that returns (directly or via <code>callback</code>)
a timeseries config json.
Note: for now, it returns only the timeseries config
of the tsproc (not the options like transform type,
data borders, correlaiton, etc).</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Json&gt; <p>Timeseries description</p>
</div>
</div>
<a name="methods_getCorrelationCoef"></a>
<div class="method item private">
    Flooat <strong class="name"><code>getCorrelationCoef</code></strong>( <code>array1, array2 </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l2079"><code>lib&#x2F;tsproc.js:2079</code></a>
    </span><br>
    <p>A private method that calculates the correlation coefficient
between two arrays of digits.</p>
<p>Using <a href="http://www.statisticshowto.com/what-is-the-correlation-coefficient-formula/">this</a>
correlation formula.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>array1</code> <strong>&lt;Array&gt;</strong>
        <p>First array of digits to count the correlation</p>

        </li>
        <li>
            <code>array2</code> <strong>&lt;Array&gt;</strong>
        <p>Second arrya of digits to count the correlation</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Flooat&gt; <p>A correlation coefficient</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code> console.log(getCorrelationCoef.call(this, [1, 2, 3, 4, 5, 6], [2, 2, 3, 4, 5, 60])); //0.69</code></pre>

</div>
<a name="methods_getDoc"></a>
<div class="method item">
    Json <strong class="name"><code>getDoc</code></strong>( <code>ts_index, doc_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l401"><code>lib&#x2F;tsproc.js:401</code></a>
    </span><br>
    <p>Public method that returns a single document from the timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
        <li>
            <code>doc_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of the document in the timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Json&gt; <p>Requested document</p>
</div>
</div>
<a name="methods_getDocByTimestamp"></a>
<div class="method item">
     <strong class="name"><code>getDocByTimestamp</code></strong>( <code>ts_index, timestamp, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l442"><code>lib&#x2F;tsproc.js:442</code></a>
    </span><br>
    <p>Public method that takes a timestamp and returns (via <code>callback</code>)
a document from the timeseries that corresponds to it.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
        <li>
            <code>timestamp</code> <strong>&lt;String&gt;</strong>
        <p>A string with date in ISO format</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
</div>
<a name="methods_getEmptyDoc"></a>
<div class="method item">
    String <strong class="name"><code>getEmptyDoc</code></strong>( <code>ts_index, doc_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l414"><code>lib&#x2F;tsproc.js:414</code></a>
    </span><br>
    <p>Public method that returns an empty document.
It is generated from a normal document (specified
by <code>ts_index</code> and <code>doc_index</code>) by emptying all the fields
except the timestamp.</p>
<p>Used by <b>tsreductions</b> class.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
        <li>
            <code>doc_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of the document in the timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;String&gt; <p>A document with empty fields except the timestamp</p>
</div>
</div>
<a name="methods_getFields"></a>
<div class="method item">
    Array <strong class="name"><code>getFields</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l484"><code>lib&#x2F;tsproc.js:484</code></a>
    </span><br>
    <p>Public method that returns an array of non-timestamp
fields present in the specified timeseries
(ie in each of it's documents).</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of field names</p>
</div>
</div>
<a name="methods_getMaxDate"></a>
<div class="method item private">
    Moment <strong class="name"><code>getMaxDate</code></strong>( <code>  </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1740"><code>lib&#x2F;tsproc.js:1740</code></a>
    </span><br>
    <p>Private method that returns the maximal (the oldest)
date of all the timeseries.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Moment&gt; <p>A moment.js date</p>
</div>
</div>
<a name="methods_getMinDate"></a>
<div class="method item private">
    Moment <strong class="name"><code>getMinDate</code></strong>( <code>  </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1714"><code>lib&#x2F;tsproc.js:1714</code></a>
    </span><br>
    <p>Private method that returns the minimal (the earliest)
date of all the timeseries.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Moment&gt; <p>A moment.js date</p>
</div>
</div>
<a name="methods_getNbTS"></a>
<div class="method item">
    Int <strong class="name"><code>getNbTS</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l328"><code>lib&#x2F;tsproc.js:328</code></a>
    </span><br>
    <p>Public method that returns the current number of timeseries in
the tsproc module.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Int&gt; <p>Number of timeseries available</p>
</div>
</div>
<a name="methods_getSameDates"></a>
<div class="method item private">
    Array <strong class="name"><code>getSameDates</code></strong>( <code>  </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1949"><code>lib&#x2F;tsproc.js:1949</code></a>
    </span><br>
    <p>Private method that returns an array
of dates that are part of all the timeseries.</p>
<p>The timestamps of all the timeseries shoud be the ISO strings.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of dates (ISO strings) that are part of all timeseries</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>//[[{a: 18.01, year:'2011-01-01T00:00:00.000Z'}, {a: 21.07, year:'2012-01-01T00:00:00.000Z'}], [{b: 21.42, year:'2012-01-01T00:00:00.000Z'}, {b: 23.11, year:'2013-01-01T00:00:00.000Z'}]]
console.log(getSameDates.call(this)); //['2012-01-01T00:00:00.000Z']
</code></pre>

</div>
<a name="methods_getTimestamp"></a>
<div class="method item">
    Moment <strong class="name"><code>getTimestamp</code></strong>( <code>ts_index, doc_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l356"><code>lib&#x2F;tsproc.js:356</code></a>
    </span><br>
    <p>Public method that returns the timestamp value (moment.js) of a specified document.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
        <li>
            <code>doc_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of the document in the timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Moment&gt; <p>A moment.js date</p>
</div>
</div>
<a name="methods_getTimestampField"></a>
<div class="method item">
    String <strong class="name"><code>getTimestampField</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l377"><code>lib&#x2F;tsproc.js:377</code></a>
    </span><br>
    <p>Public method that returns the name of timestamp field of specified timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;String&gt; <p>A timestamp field name</p>
</div>
</div>
<a name="methods_getTimestampFormat"></a>
<div class="method item">
    String <strong class="name"><code>getTimestampFormat</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l389"><code>lib&#x2F;tsproc.js:389</code></a>
    </span><br>
    <p>Public method that returns a format of timestamp field of specified timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;String&gt; <p>A timestamp format</p>
</div>
</div>
<a name="methods_getTS"></a>
<div class="method item">
    Array <strong class="name"><code>getTS</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l282"><code>lib&#x2F;tsproc.js:282</code></a>
    </span><br>
    <p>Public method that returns (directly or via <code>callback</code>)
a single timeseries if there is only one (if
it is merged for example),
or an array of timeseries if trere are many.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>Callback function</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>One or an array of timeseries</p>
</div>
</div>
<a name="methods_getTSDates"></a>
<div class="method item private">
    Array <strong class="name"><code>getTSDates</code></strong>( <code>ts_index </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1983"><code>lib&#x2F;tsproc.js:1983</code></a>
    </span><br>
    <p>Private method that returns an array
of all the dates present in a specified timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>An index of a timeseries to extract the dates</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Array&gt; <p>An array of dates from a specific timeseries</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>//[[{a: 18.01, year:'2011-01-01T00:00:00.000Z'}, {a: 21.07, year:'2012-01-01T00:00:00.000Z'}], [{b: 21.42, year:'2012-01-01T00:00:00.000Z'}, {b: 23.11, year:'2013-01-01T00:00:00.000Z'}]]
console.log(getTSDates.call(this, 0)); //['2011-01-01T00:00:00.000Z', '2012-01-01T00:00:00.000Z']
</code></pre>

</div>
<a name="methods_getTSSize"></a>
<div class="method item">
    Int <strong class="name"><code>getTSSize</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l340"><code>lib&#x2F;tsproc.js:340</code></a>
    </span><br>
    <p>Public method that returns the number of documents in specified timeseries.
If there is no timeseries specified, returns the size of the first one.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The timeseries index</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Int&gt; <p>Size of the timeseries</p>
</div>
</div>
<a name="methods_interpolate"></a>
<div class="method item">
     <strong class="name"><code>interpolate</code></strong>( <code>type, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1139"><code>lib&#x2F;tsproc.js:1139</code></a>
    </span><br>
    <p>Public mehtod that could be applied for two or more timeseries
to interpolate the missing datapoints (documents) in relation to
each other.</p>
<p>Interpolation methods are: linear, cubic, lanczos, and neares neighbor.
Methods comparaison could be found <a href="http://osuushi.github.io/plotdemo016.html">here</a>.</p>
<p>Timestamps should be the ISO strings and field values
should be numeric (non-nominal).
Uses a <b>tsinterp</b> module.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>type</code> <strong>&lt;Int&gt;</strong>
        <p>An index of InterpEnum with interpolation methods</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}, {a: 24.24, year:'2014'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}, {b: 21.01, year:'2015'}]
     ];

var tsp = new tsproc(ts, config, null);

//pass to iso timestamps
tsp.toISO(null);

//linear interpolation (type = 0)
tsp.interpolate(0, function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', a: 21.07},
        //      {year: '2013-01-01T00:00:00.000Z', a: 23.23},
        //      {year: '2014-01-01T00:00:00.000Z', a: 24.24},
        //      {year: '2015-01-01T00:00:00.000Z', a: 0}
        //  ],
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', b: 26.42},
        //      {year: '2013-01-01T00:00:00.000Z', b: 24.11},
        //      {year: '2014-01-01T00:00:00.000Z', b: 22.560000000000002}
        //      {year: '2015-01-01T00:00:00.000Z', b: 21.01}
        //  ]
        //]
});

//cubic interpolation (type = 1)
tsp.interpolate(1, function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', a: 21.07},
        //      {year: '2013-01-01T00:00:00.000Z', a: 23.23},
        //      {year: '2014-01-01T00:00:00.000Z', a: 24.24},
        //      {year: '2015-01-01T00:00:00.000Z', a: 0}
        //  ],
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', b: 26.42},
        //      {year: '2013-01-01T00:00:00.000Z', b: 24.11},
        //      {year: '2014-01-01T00:00:00.000Z', b: 23.72875}
        //      {year: '2015-01-01T00:00:00.000Z', b: 21.01}
        //  ]
        //]
});
</code></pre>

</div>
<a name="methods_intersect"></a>
<div class="method item">
     <strong class="name"><code>intersect</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1292"><code>lib&#x2F;tsproc.js:1292</code></a>
    </span><br>
    <p>Public mehtod that could be applied for two or more timeseries
to simplify them and leave only the documents that have the same
timestamps in different timeseries (cf example).</p>
<p>Timestamps should be the ISO strings and field values
should be numeric (non-nominal).</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}, {a: 24.24, year:'2014'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}, {b: 21.01, year:'2015'}]
     ];

var tsp = new tsproc(ts, config, null);

//pass to iso timestamps
tsp.toISO(null);

tsp.intersect(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', a: 21.07},
        //      {year: '2013-01-01T00:00:00.000Z', a: 23.23}
        //  ],
        //  [
        //      {year: '2012-01-01T00:00:00.000Z', b: 26.42},
        //      {year: '2013-01-01T00:00:00.000Z', b: 24.11}
        //  ]
        //]
});
</code></pre>

</div>
<a name="methods_isHomogeneous"></a>
<div class="method item">
    Boolean <strong class="name"><code>isHomogeneous</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l557"><code>lib&#x2F;tsproc.js:557</code></a>
    </span><br>
    <p>Public method that verifies wheather the timeseries is homogeneous.</p>
<p>If there is only one timeseries, it is considered homogeneous.
If there are many, they are considered homogeneous if every timeseries
has the same timestamps at same positions.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>Wheather a set of timeseries is homogeneous</p>
</div>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

//homogeneous timeseries
var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}, {a: 0.24, year:'2014'}],
        [{b: 21.42, year:'2012'}, {b: 23.11, year:'2013'}, {b: 0.11, year:'2014'}]
     ];
var tsp = new tsproc(ts, config, null);
console.log(tsp.isHomogeneous()); //true

//non homogeneous timeseries
var ts = [
        [{a: 21.07, year:'2012'}, {a: 0.24, year:'2014'}],
        [{b: 21.42, year:'2012'}, {b: 23.11, year:'2013'}, {b: 0.11, year:'2014'}]
     ];
var tsp = new tsproc(ts, config, null);
console.log(tsp.isHomogeneous()); //false</code></pre>

</div>
<a name="methods_isISO"></a>
<div class="method item">
    Boolean <strong class="name"><code>isISO</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l718"><code>lib&#x2F;tsproc.js:718</code></a>
    </span><br>
    <p>Public method that checks wheather the timestamps have ISO format.
The method checks only the format written in config json, it does not verify the timestamps
of all the documents.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>Wheather the timestamps have the ISO format</p>
</div>
</div>
<a name="methods_isNominal"></a>
<div class="method item">
    Boolean <strong class="name"><code>isNominal</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l784"><code>lib&#x2F;tsproc.js:784</code></a>
    </span><br>
    <p>Public method that checks wheather one of the timeseries
has a nominal field.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>Wheather one of the timeseries has a nominal field</p>
</div>
</div>
<a name="methods_isUNIX"></a>
<div class="method item">
    Boolean <strong class="name"><code>isUNIX</code></strong>( <code>ts_index </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l751"><code>lib&#x2F;tsproc.js:751</code></a>
    </span><br>
    <p>Public method that checks wheather the timestamps have UNIX format.
The method checks only the format written in config json, it does not verify the timestamps
of all the documents.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of timeseries</p>

        </li>
    </ul>
    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>Wheather the timestamps are unix timestamps</p>
</div>
</div>
<a name="methods_isValid"></a>
<div class="method item">
    Boolean <strong class="name"><code>isValid</code></strong>( <code>  </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l630"><code>lib&#x2F;tsproc.js:630</code></a>
    </span><br>
    <p>Public method that checks wheather the format of the timestamps in each
timeseries is correct.</p>

    <br><div class="returns"><strong>Returns:</strong> &lt;Boolean&gt; <p>Wheather the date format is correct</p>
</div>
</div>
<a name="methods_markCorrelation"></a>
<div class="method item private">
     <strong class="name"><code>markCorrelation</code></strong>( <code>borders, corr_value </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l2134"><code>lib&#x2F;tsproc.js:2134</code></a>
    </span><br>
    <p>A private method that adds to the set of documents
(specified by the <code>borders</code>) a field 'correlation' with value
<code>corr_value</code> (cf example).</p>
<p>If no borders are specified, the field would be added
to all of the documents of the timeseries.<br/>
If no correlation value is specified the 'false' would
be attributed.</p>
<p>The method works only with merged timeseries and only if
there are at least 2 non-timestamp fields.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>borders</code> <strong>&lt;Array&gt;</strong>
        <p>An array of indexes between which the correlation should be marked</p>

        </li>
        <li>
            <code>corr_value</code> <strong>&lt;Float&gt;</strong>
        <p>The correlation value to add</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>//[{a: 18.01, year:'2011'}, {a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}]
markCorrelation.call(this, [1,2], 0.9); console.log(this.getTS()); //[{a: 18.01, year:'2011'}, {a: 21.07, year:'2012', correlation: 0.9}, {a: 23.23, year:'2013', correlation: 0.9}]
markCorrelation.call(this); console.log(this.getTS()); //[{a: 18.01, year:'2011', correlation: false}, {a: 21.07, year:'2012', correlation: 0.9}, {a: 23.23, year:'2013', correlation: 0.9}]

//[{a: 18.01, year:'2011'}, {a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}]
markCorrelation.call(this); console.log(this.getTS()); //[{a: 18.01, year:'2011', correlation: false}, {a: 21.07, year:'2012', correlation: false}, {a: 23.23, year:'2013', correlation: false}]</code></pre>

</div>
<a name="methods_merge"></a>
<div class="method item">
     <strong class="name"><code>merge</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l958"><code>lib&#x2F;tsproc.js:958</code></a>
    </span><br>
    <p>Public method that merges two or more timeseries
into one timeseries. The timeseries should be homogeneous.</p>
<p>The result timeseries would have only one timestamp field
(it's name is specified by TIMESTAMP_FIELD proprety).</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}]
     ];

var tsp = new tsproc(ts, config, null);

tsp.merge(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  {a: 21.07, b: 26.42, time: '2012'},
        //  {a: 23.23, b: 24.11, time: '2013'}
        //]
});</code></pre>

</div>
<a name="methods_mergeConfigs"></a>
<div class="method item private">
     <strong class="name"><code>mergeConfigs</code></strong>( <code>  </code> ) <em><code>&#x2F;* private method *&#x2F;</code></em>
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1672"><code>lib&#x2F;tsproc.js:1672</code></a>
    </span><br>
    <p>Private method that merges the configuration of
multiple timeseries into one.
The final timestamp name is defined by the
TIMESTAMP_FIELD proprety.</p>

</div>
<a name="methods_process"></a>
<div class="method item">
     <strong class="name"><code>process</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l187"><code>lib&#x2F;tsproc.js:187</code></a>
    </span><br>
    <p>A main public method that processes a set of timeseries. It returns (via <code>callback</code>) a single timeseries with timestamp 'time' with
ISO format.</p>
<p>The processing takes the next steps:</p>
<ul>
<li>if the borders (min and max dates) are specified in the config file, the timeseries would be cut</li>
<li>all the dates would be transformed to the ISO string</li>
<li>if there are multiple timeseries, and they are not homogeneous, all the timeseries would be interpolated or intersected (cf <a href="#methods_intersect">intersect()</a> function)</li>
<li>if the are multiple timeseries (and after the previous step they are all homogeneous), they would be fused into one timeseries document by document</li>
<li>the output timeseries's timestamp field would be called 'time' and it would be an ISO string</li>
<li>finally, if the skip value is defined, the timeseries would be undersampled to decrease it's size</li>
</ul>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 18.11, year:'2011'}, {a: 21.07, year:'2012'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}]
     ];

var tsp = new tsproc(ts, config, null);

tsp.process(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  {time:'2011-01-01T00:00:00.000Z', a: 18.11, b: 0},
        //  {time:'2012-01-01T00:00:00.000Z', a: 21.07, b: 26.42},
        //  {time:'2013-01-01T00:00:00.000Z', a: 0, b: 24.11} 
        //]
});</code></pre>

</div>
<a name="methods_quantize"></a>
<div class="method item">
     <strong class="name"><code>quantize</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1517"><code>lib&#x2F;tsproc.js:1517</code></a>
    </span><br>
    <p>Public method that is aplying the
quantification to all the values
of the timeseries (timestamps and normal).</p>
<p>Timeseries should be merged (ie the function works only with a single timeseries),
timestamps should have an ISO format.
Also, the method should be used only by timeseries with numeric fields (non-nominal).</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {
        &quot;transform&quot;:{&quot;type&quot;:&quot;interp&quot;,&quot;interp_type&quot;:&quot;linear&quot;},

        &quot;reduction&quot;:{&quot;type&quot;:&quot;skip&quot;,&quot;size&quot;:1,&quot;target_field&quot;:&quot;&quot;},

        &quot;date_borders&quot;:{&quot;from&quot;:{&quot;date&quot;:&quot;&quot;},&quot;to&quot;:{&quot;date&quot;:&quot;&quot;}},

        &quot;correlation&quot;:{&quot;count_negative&quot;:false,&quot;max_coef&quot;:true},

        &quot;timeseries&quot;:
            [
                {
                &quot;fields&quot;:
                    [
                        {&quot;name&quot;:&quot;a&quot;, &quot;quantum&quot;: 2}  //new field
                    ],

                &quot;timestamp&quot;:{&quot;name&quot;:&quot;year&quot;,&quot;format&quot;:&quot;YYYY-MM&quot;, &quot;quantum&quot;: &quot;year&quot;}
                },

                {
                &quot;fields&quot;:
                    [
                        {&quot;name&quot;:&quot;b&quot;, &quot;quantum&quot;: 2}  //new field
                    ],  

                &quot;timestamp&quot;:{&quot;name&quot;:&quot;year&quot;,&quot;format&quot;:&quot;YYYY-MM&quot;, &quot;quantum&quot;: &quot;year&quot;}
                }
            ]
    };

var ts = [
        [{a: 21.07, year:'2012-01'}, {a: 23.23, year:'2012-02'}, {a: 0.24, year:'2012-03'}, {a: 25.25, year:'2013-01'}, {a: 25.25, year:'2013-02'}, {a: 25.25, year:'2013-03'}],
        [{b: 21.42, year:'2012-01'}, {b: 23.11, year:'2012-02'}, {b: 0.11, year:'2012-03'}, {b: 21.01, year:'2013-01'}, {b: 4.5, year:'2013-02'}, {b: 35.2, year:'2013-03'}]
     ];

var tsp = new tsproc(ts, config, null);

//we can just merge (without interpolation) the timeseries
//because they are homogeneous
tsp.merge(null);
tsp.toISO(null);

//launch the quantification
tsp.quantize(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  {a: 20, b: 20, time: '2012-01-01T00:00:00.000Z'},
        //  {a: 22, b: 22, time: '2012-01-01T00:00:00.000Z'},
        //  {a: 0, b: 0, time: '2012-01-01T00:00:00.000Z'},
        //  {a: 24, b: 20, time: '2013-01-01T00:00:00.000Z'},
        //  {a: 24, b: 4, time: '2013-01-01T00:00:00.000Z'},
        //  {a: 24, b: 34, time: '2013-01-01T00:00:00.000Z'} 
        //]
        //
        // we can conclude that values were rounded to 2, and dates to the year
});
</code></pre>

</div>
<a name="methods_renameField"></a>
<div class="method item">
     <strong class="name"><code>renameField</code></strong>( <code>ts_index, field_name, new_name, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l656"><code>lib&#x2F;tsproc.js:656</code></a>
    </span><br>
    <p>Public method that renames a field in the specified timeseries.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>ts_index</code> <strong>&lt;Int&gt;</strong>
        <p>The index of a timeseries</p>

        </li>
        <li>
            <code>field_name</code> <strong>&lt;String&gt;</strong>
        <p>A field to rename</p>

        </li>
        <li>
            <code>new_name</code> <strong>&lt;String&gt;</strong>
        <p>A new field name</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 18.11, year:'2011'}, {a: 21.07, year:'2012'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}]
     ];

var tsp = new tsproc(ts, config, null);

tsp.renameField(0, 'a', 'new_a', function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {new_a: 18.11, year: '2011'},
        //      {new_a: 21.07, year: '2012'}
        //  ],
        //  [
        //      {b: 26.42, year: '2012'},
        //      {b: 24.11, year: '2013'}
        //  ]
        //]
});</code></pre>

</div>
<a name="methods_toISO"></a>
<div class="method item">
     <strong class="name"><code>toISO</code></strong>( <code>callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l817"><code>lib&#x2F;tsproc.js:817</code></a>
    </span><br>
    <p>Public method that passes all the timestamps
to the ISO format (YYYY-MM-DDTHH:mm:ss.SSSSZ).
The name of the timestamps is not changed.</p>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 18.11, year:'2011'}, {a: 21.07, year:'2012'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}]
     ];

var tsp = new tsproc(ts, config, null);

tsp.toISO(function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {a: 18.11, year: '2011-01-01T00:00:00.000Z'},
        //      {a: 21.07, year: '2012-01-01T00:00:00.000Z'}
        //  ],
        //  [
        //      {b: 26.42, year: '2012-01-01T00:00:00.000Z'},
        //      {b: 24.11, year: '2013-01-01T00:00:00.000Z'}
        //  ]
        //]
});</code></pre>

</div>
<a name="methods_undersample"></a>
<div class="method item">
     <strong class="name"><code>undersample</code></strong>( <code>type, skipsize, target_field, callback </code> ) 
    <br>
    <span class="foundat">
        
        <a href="../files/lib_tsproc.js.html#l1040"><code>lib&#x2F;tsproc.js:1040</code></a>
    </span><br>
    <p>Public method that reduces the number
of documents in the timeseries by different
methods. Applied only if the timeseries are homogeneous. And
only if the field values are numeric (non-nominal).
Uses a <b>tsreductions</b> module.</p>
<p>The reduction mehtods are:</p>
<ul>
<li>skip: choose one document (first) from <code>skipsize</code> documents</li>
<li>sum: sum the values of <code>skipsize</code> documents into one</li>
<li>avg: average the values of <code>skipsize</code> documents into one</li>
<li>max: choose one document from <code>skipsize</code> documents with the maximum value of <code>target_field</code></li>
<li>min: choose one document from <code>skipsize</code> documents with the minimum value of <code>target_field</code></li>
</ul>

    <strong>Parameters:</strong>
    <ul class="params">
        <li>
            <code>type</code> <strong>&lt;Int&gt;</strong>
        <p>An index of ReduceEnum with reduction methods</p>

        </li>
        <li>
            <code>skipsize</code> <strong>&lt;Int&gt;</strong>
        <p>A number of documents to be reduced into one</p>

        </li>
        <li>
            <code>target_field</code> <strong>&lt;String&gt;</strong>
        <p>A targeted field to calculate the max or min reduction</p>

        </li>
        <li>
            <code>callback</code> <strong>&lt;Function&gt;</strong>
        <p>A callback function</p>

        </li>
    </ul>
        <h5>Example</h5>
        <pre class="code prettyprint"><code>var tsproc = require('tsproc');

var config = {}; //config example is in the tsproc method

var ts = [
        [{a: 21.07, year:'2012'}, {a: 23.23, year:'2013'}, {a: 24.24, year:'2014'}, {a: 25.25, year:'2015'}],
        [{b: 26.42, year:'2012'}, {b: 24.11, year:'2013'}, {b: 22.11, year:'2014'}, {b: 21.01, year:'2015'}]
     ];

var tsp = new tsproc(ts, config, null);

//simple skip (type = 0)
tsp.undersample(0, 2, null, function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {a: 21.07, year: '2012'},
        //      {a: 24.24, year: '2014'}
        //  ],
        //  [
        //      {b: 26.42, year: '2012'},
        //      {b: 22.11, year: '2014'}
        //  ]
        //]
});

//max value of field 'a' (type = 3)
tsp.undersample(3, 2, 'a', function(err, timeseries){

        if (timeseries) console.log(timeseries);
        //the result is:
        //[
        //  [
        //      {a: 23.23, year: '2013'},
        //      {a: 25.25, year: '2015'}
        //  ],
        //  [
        //      {b: 26.42, year: '2012'},
        //      {b: 22.11, year: '2014'}
        //  ]
        //]
});</code></pre>

</div>
            </div>
            <div id="props">
<a name="props_InterpEnum"></a>
<div class="props item">
    <code>InterpEnum</code> &lt;<strong>Json</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l36"><code>lib&#x2F;tsproc.js:36</code></a></span>
    <p>A description of interpolation
methods offered by the <b>tsinterp</b> class.</p>

</div>
<a name="props_ISO_FORMAT"></a>
<div class="props item">
    <code>ISO_FORMAT</code> &lt;<strong>String</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l10"><code>lib&#x2F;tsproc.js:10</code></a></span>
    <p>A constant that holds
the format of ISO date.</p>

</div>
<a name="props_ReduceEnum"></a>
<div class="props item">
    <code>ReduceEnum</code> &lt;<strong>Json</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l44"><code>lib&#x2F;tsproc.js:44</code></a></span>
    <p>A description of timeseries size
reduction methods offered by the <b>tsreductions</b> class.</p>

</div>
<a name="props_ReduceFunc"></a>
<div class="props item">
    <code>ReduceFunc</code> &lt;<strong>Array</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l54"><code>lib&#x2F;tsproc.js:54</code></a></span>
    <p>An array of timeseries size
reduction functions.</p>

</div>
<a name="props_TIMESTAMP_FIELD"></a>
<div class="props item">
    <code>TIMESTAMP_FIELD</code> &lt;<strong>String</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l27"><code>lib&#x2F;tsproc.js:27</code></a></span>
    <p>A constant that holds the name
of the timestamp field that would be generated
after the merge (cf merge() and process() functions).</p>

</div>
<a name="props_UNIX_FORMAT"></a>
<div class="props item">
    <code>UNIX_FORMAT</code> &lt;<strong>String</strong>&gt;<br>
    <span class="foundat"><a href="../files/lib_tsproc.js.html#l18"><code>lib&#x2F;tsproc.js:18</code></a></span>
    <p>A constant that describes
when the timestamp format is a unix
timestamp.</p>

</div>
            </div>
    </div>
</div>
</div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/js/tabs.js"></script>
</body>
</html>
